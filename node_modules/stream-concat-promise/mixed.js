"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var concat = _interopRequire(require("concat-stream"));

var Promise = _interopRequire(require("promise"));

var merge = function (dest, src) {
  for (var _name in src) {
    dest[_name] = src[_name];
  }return dest;
};

var defer = function () {
  var deferred = {};

  deferred.promise = new Promise(function (resolve, reject) {
    deferred.resolve = resolve;
    deferred.reject = reject;
  });

  return deferred;
};

module.exports = function (opts) {
  var _defer = defer();

  var promise = _defer.promise;
  var resolve = _defer.resolve;

  return merge(promise, concat(opts, resolve));
};